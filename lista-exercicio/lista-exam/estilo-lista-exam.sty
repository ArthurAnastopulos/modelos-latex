% !TEX root = lista-exam.tex

\ProvidesPackage{estilo-prova-exam}
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage{amsmath,amsthm,amsfonts}
\usepackage{pifont}
\usepackage{ae,aecompl}
\usepackage{upquote}
\usepackage{pgf}
\usepackage{boxedminipage}
\usepackage{listings,color,indentfirst}
\usepackage{graphicx}
\usepackage{multirow,multicol,,enumerate}
\usepackage{url}
\usepackage{subcaption}
\urlstyle{sf}
\usepackage[a4paper,bottom=3cm,hmargin=2cm]{geometry}



% -------------------------------------------------------------------------------------------------------------- %
% Configurações da classe exam
% -------------------------------------------------------------------------------------------------------------- %
% dicas obtidas em
% http://www.tex-br.org/index.php?title=Exam&printable=yes

\newcommand{\formatoquestao}{\qformat{\textbf{Questão \thequestion:}\hfill[\pointsofquestion{\arabic{question}} \points]}}

\newcommand{\tf}[1][{}]{%
  \fillin[#1][0.25in]%
}

\marginpointname{ \points}
\setlength\linefillheight{.6cm} %distância entre linhas


% traduções 
\pointpoints{ponto}{pontos}
\renewcommand{\solutiontitle}{\noindent\textbf{Solução:}\enspace}
\totalformat{Total: \totalpoints\ \points}
\hqword{Questões} %substitutes text for Question:
\hpgword{Páginas} %substitutes text for Page:
\hpword{Total de pontos} %substitutes text for Points:
\hsword{Pontos obtidos} %substitutes text for Score:
\htword{Total} %substitutes text for Total% -------------------------------------------------------------------------------------------------------------- %


% -------------------------------------------------------------------------------------------------------------- %
% Comandos personalizados para o IFSC
% -------------------------------------------------------------------------------------------------------------- %
% ----------------------------------------------------
% Declaração do caminho das imagens
% ----------------------------------------------------
% Logo
\pgfdeclareimage[width=1cm]{logo}{imagem/logo-mono.png}
% Info
\pgfdeclareimage[width=.6cm]{nota}{imagem/nota.pdf}
% Warning
\pgfdeclareimage[width=.6cm]{atencao}{imagem/atencao.pdf}

% nome do aluno
\newcommand{\nomealuno}{
\noindent Aluno: \rule{.6\linewidth}{.4pt} Matrícula: \rule{.19\linewidth}{.4pt}
\bigskip}

\newcommand{\listasemnomealuno}[5]{
\pagestyle{headandfoot}
% Rodapé
\footrule
\firstpagefooter{\begin{tiny}IFSC -- \textsc{Campus São José}\end{tiny}}{}{Pág. \thepage\ de \numpages}
\runningfooter{\begin{tiny}IFSC -- \textsc{Campus São José}\end{tiny}}{}{Pág. \thepage\ de \numpages}

\extraheadheight[1in]{0cm}
\firstpageheader{}{
\noindent
\begin{center}
\fbox{
\begin{minipage}{.97\textwidth}
\begin{tabular}{ll}
\multirow{2}{1cm}{\pgfuseimage{logo}} & \multirow{2}{*}{#4} \\
 &  \\
\end{tabular}\hfill #3
  \begin{center}
    {\Large \textbf{Lista #1}: #2} \\[3mm]
  \end{center}
  Professor: #5
  \end{minipage}}
\end{center}
}{}
}

\newcommand{\listacomnomealuno}[5]{
\pagestyle{headandfoot}
% Rodapé
\footrule
\firstpagefooter{\begin{tiny}IFSC -- \textsc{Campus São José}\end{tiny}}{}{Pág. \thepage\ de \numpages}
\runningfooter{\begin{tiny}IFSC -- \textsc{Campus São José}\end{tiny}}{}{Pág. \thepage\ de \numpages}

\extraheadheight[1.5in]{0cm}
\firstpageheader{}{
\noindent
\begin{center}
\fbox{
\begin{minipage}{.97\textwidth}
\begin{tabular}{ll}
\multirow{2}{1cm}{\pgfuseimage{logo}} & \multirow{2}{*}{#4} \\
 &  \\
\end{tabular}\hfill #3
  \begin{center}
    {\Large \textbf{Lista #1}: #2} \\[3mm]
  \end{center}
  Professor: #5
  \end{minipage}}
\end{center}
\bigskip
\nomealuno
}{}
}

% -------------------------------------------------------------------------------------------------------------- %


% Criando ambientes nota e atencao
%  Retirado do aula-01.tex ``Programando em Python``, Gustavo Sverzut Barbieri
  \def\fboxsep{3pt}
  \newenvironment{myboxenv}[1]
  {
    \begin{flushright}
      \begin{boxedminipage}{0.97\textwidth}
        \textbf{\sffamily\large #1:}\\
        \hspace{-5pt}\rule{0.2\textwidth}{0.5pt}
        \begin{center}
          \begin{minipage}{0.95\textwidth}
            \small\slshape}{
          \end{minipage}
        \end{center}
      \end{boxedminipage}
    \end{flushright}
 }

  \newenvironment{nota}
  {
    \begin{myboxenv}{
%        \includegraphics[scale=0.15]{imagem/nota.pdf}
\pgfuseimage{nota}
        Nota}
   }
    {
    \end{myboxenv}
 }
 
 \newenvironment{notap}
  {
    \begin{myboxenv}{
        Nota}
   }
    {
    \end{myboxenv}
 }


  \newenvironment{atencao}
  {
    \begin{myboxenv}{
%        \includegraphics[scale=0.15]{imagem/atencao.pdf}
\pgfuseimage{atencao}
        Atenção}
   }
    {
    \end{myboxenv}
 }
% -------------------------------------------------------------------------------------------------------------- %
% Para permitir que as referências cruzadas sejam ponteiros
\RequirePackage{hyperref}
\hypersetup{colorlinks,
	linkcolor=black,  %%% cor do tableofcontents, \ref, \footnote, etc
	citecolor=black,  %%% cor do \cite
	urlcolor=black,   %%% cor do \url e \href
	%pdfpagemode,     %%%  None (default), UseThumbs, UseOutlines, FullScreen
	pdfstartview=FitH, %%% FitB, FitH
	bookmarksopen=false,
	bookmarksopenlevel=1
}




% -------------------------------------------------------------------------------------------------------------- %
% Configurações para inserir código fonte de programas - pacote listings
% -------------------------------------------------------------------------------------------------------------- %
% Altera o nome padrão do rótulo usado no comando \autoref{}
\renewcommand{\lstlistingname}{Código}

% Altera o rótulo a ser usando no elemento pré-textual "Lista de código"
\renewcommand{\lstlistlistingname}{Lista de códigos}


% Definindo cores
\definecolor{hellgelb}{rgb}{1,1,0.9}
\definecolor{colKeys}{rgb}{0,0,0}
\definecolor{colIdentifier}{rgb}{0,0,0.9}
\definecolor{colComments}{rgb}{.4,.4,.4}
\definecolor{colString}{rgb}{0,0,0.6}

\definecolor{colBack}{rgb}{1,1,.98}
\definecolor{colKeys}{rgb}{0,0,0}
\definecolor{colIdentifier}{rgb}{0,0,0.9}
\definecolor{colComments}{rgb}{.4,.4,.4}
\definecolor{colString}{rgb}{0,0,0.6}

\lstset{ %
  aboveskip=\bigskipamount,
  backgroundcolor=\color{colBack},   % choose the background color; you must add \usepackage{color} or 
  basicstyle=\ttfamily\footnotesize,       % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=n,                    % sets the caption-position to bottom
  columns=flexible,
  commentstyle=\color{colComments},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapechar={@*},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  linewidth=0.98\linewidth,
  tab=$\to$,
  float=tbph,
  xleftmargin=10pt,
  frame=single,	                   % adds a frame around the code
  keepspaces=true,                % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
identifierstyle=\color{colIdentifier},
  keywordstyle=\color{colKeys},       % keyword style
%  otherkeywords={*,...},            % if you want to add more keywords to the set
  firstnumber=last,
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny,
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
%   stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{colString},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

% Permitindo caracteres acentuados dentro do ambiente lstlisting
\lstset{%
        inputencoding=utf8,
        extendedchars=true,
        literate=%
        {é}{{\'{e}}}1
        {è}{{\`{e}}}1
        {ê}{{\^{e}}}1
        {ë}{{\¨{e}}}1
        {É}{{\'{E}}}1
        {Ê}{{\^{E}}}1
        {û}{{\^{u}}}1
        {ù}{{\`{u}}}1
        {â}{{\^{a}}}1
        {à}{{\`{a}}}1
        {á}{{\'{a}}}1
        {ã}{{\~{a}}}1
        {Á}{{\'{A}}}1
        {Â}{{\^{A}}}1
        {Ã}{{\~{A}}}1
        {ç}{{\c{c}}}1
        {Ç}{{\c{C}}}1
        {õ}{{\~{o}}}1
        {ó}{{\'{o}}}1
        {ú}{{\'{u}}}1
        {Ú}{{\'{U}}}1
        {ô}{{\^{o}}}1
        {Õ}{{\~{O}}}1
        {Ó}{{\'{O}}}1
        {Ô}{{\^{O}}}1
        {î}{{\^{i}}}1
        {Î}{{\^{I}}}1
        {í}{{\'{i}}}1
        {Í}{{\~{Í}}}1
}

% Criando comandos para algumas linguagens de programação
\lstdefinestyle{shell}{language=csh,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{shellp}{language=csh,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{php}{language=php,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{phpp}{language=php,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{ansic}{language=c,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{ansicp}{language=c,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{java}{language=java,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{javap}{language=java,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{matlab}{language=matlab,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{matlabp}{language=matlab,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{python}{language=python,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{pythonp}{language=python,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{xml}{language=xml,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{xmlp}{language=xml,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{sql}{language=sql,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{sqlp}{language=sql,basicstyle=\ttfamily\scriptsize}

\newcommand{\ansic}{\lstset{style=ansic}}
\newcommand{\ansicp}{\lstset{style=ansicp}}
\newcommand{\java}{\lstset{style=java}}
\newcommand{\javap}{\lstset{style=javap}}
\newcommand{\sql}{\lstset{style=sql}}
\newcommand{\sqlp}{\lstset{style=sqlp}}
\newcommand{\xml}{\lstset{style=xml}}
\newcommand{\xmlp}{\lstset{style=xmlp}}
\newcommand{\python}{\lstset{style=python}}
\newcommand{\pythonp}{\lstset{style=pythonp}}
\newcommand{\csh}{\lstset{style=shell}}
\newcommand{\cshp}{\lstset{style=shellp}}
\newcommand{\shell}{\lstset{style=shell}}
\newcommand{\shellp}{\lstset{style=shellp}}

% Incluindo códigos que estão em um arquivo externo
%parâmetros: linguagem (shell, java, matlab, python, c, php), label, caption, arquivo

%\includecode[shell]{l_olamundo}{Olá mundo em shell script}{codigos/ola.sh}

\newcommand{\includecode}[4][c]{\lstinputlisting[captionpos=t,caption=#3, label=#2,escapechar={@*}, style=#1]{#4}}

%---------------------------------------------------------------------------------------------------------------%
